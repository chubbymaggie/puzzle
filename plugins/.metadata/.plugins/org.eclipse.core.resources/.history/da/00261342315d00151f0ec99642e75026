package es.us.isa.fama;

import java.io.File;
import java.net.URL;
import java.util.LinkedList;

import org.eclipse.core.runtime.FileLocator;
import org.eclipse.core.runtime.Platform;

import es.us.isa.FAMA.Reasoner.DefaultCriteriaSelector;
import es.us.isa.FAMA.Reasoner.QuestionTrader;
import es.us.isa.FAMA.loader.ExtensionsLoaderFactory;
import es.us.isa.FAMA.stagedConfigManager.Configuration;

public class PluginQuestionTrader extends QuestionTrader {

	public PluginQuestionTrader(){
		super();
		
		URL libFolderPath = Platform.getBundle("es.us.isa.fama").getEntry("/FaMaConfig.xml");
		File libFolder = new File(FileLocator.resolve(libFolderPath).toURI());
        File projectFolder = new File(project.getLocation().toString());
		
		extFactory = new ExtensionsLoaderFactory();
		extLoad = extFactory.createExtensionsLoader("./FaMaConfig.xml", this);
		reasoners = extLoad.getReasoners();
		selectorsMap = extLoad.getSelectorsMap();
		questionsMap = extLoad.getQuestionsMap();
		reasonersIdMap = extLoad.getReasonersIdMap();
		transformationsMap = extLoad.getTransformationsMap();
		configurations = new LinkedList<Configuration>();
		selector = new DefaultCriteriaSelector(this);
		mp = extLoad.getModelParser();
	}
}
